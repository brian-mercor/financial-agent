<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>iChatbook — Unlock Any Book: Your Personal AI Chat Companion</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="dark">
  <meta name="description" content="Unlock Any Book with iChatbook — an AI chat companion for interactive reading and deep book comprehension.">
  <style>
    /* Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Poppins:wght@500;600;700;800;900&display=swap');

    :root{
      --bg:#060608;
      --panel:#0b0d12;
      --glass:rgba(255,255,255,0.06);
      --glass-2:rgba(255,255,255,0.08);
      --text:#e9eef8;
      --muted:#a7b0c0;
      --primary:#2d7dff; /* primary blue */
      --accent-red:#ff3131;
      --accent-yellow:#ffc83a;
      --accent-blue:#2d7dff;
      --shadow: 0 10px 30px rgba(0,0,0,0.45), 0 2px 10px rgba(0,0,0,0.35);
      --radius:18px;
      --radius-sm:12px;
      --grad-primary: linear-gradient(135deg, #ff3131 0%, #ffc83a 50%, #2d7dff 100%);
      --grad-deep: radial-gradient(1200px 800px at 10% -10%, rgba(255,49,49,0.25), transparent 45%), radial-gradient(800px 600px at 100% 10%, rgba(45,125,255,0.28), transparent 55%), radial-gradient(700px 700px at 30% 80%, rgba(255,200,58,0.25), transparent 45%);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background: var(--bg);
      line-height:1.5;
      overflow-x:hidden;
    }
    .container{
      width:min(1200px, 92%);
      margin:0 auto;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    button, input, textarea, select{font:inherit;color:inherit}

    /* Header */
    header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background: linear-gradient(to bottom, rgba(8,10,14,0.7), rgba(8,10,14,0.35));
      border-bottom:1px solid rgba(255,255,255,0.06);
    }
    .nav{
      display:flex; align-items:center; gap:22px; padding:14px 0;
    }
    .brand{
      display:flex; align-items:center; gap:12px; font-weight:800; letter-spacing:0.2px; font-family:Poppins, Inter, sans-serif;
    }
    .logo{
      width:38px; height:38px; border-radius:50%;
      background: conic-gradient(from 140deg, #2d7dff, #ffc83a, #ff3131, #2d7dff);
      position:relative; box-shadow: 0 0 0 2px rgba(255,255,255,0.06), 0 8px 18px rgba(0,0,0,0.4);
      overflow:hidden;
    }
    .logo::after{
      content:""; position:absolute; inset:5px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.45), transparent 45%), radial-gradient(circle at 70% 70%, rgba(255,255,255,0.12), transparent 55%);
      mix-blend-mode: screen;
    }
    nav ul{display:flex; gap:20px; list-style:none; padding:0; margin:0}
    nav a{
      padding:10px 12px; border-radius:10px; color:var(--muted);
    }
    nav a:hover{color:var(--text); background:var(--glass)}
    .nav-actions{margin-left:auto; display:flex; gap:12px; align-items:center}
    .btn{
      border:0; border-radius:999px; padding:12px 18px; cursor:pointer; background:var(--glass);
      transition: transform .2s ease, box-shadow .2s ease, background .2s ease; box-shadow: var(--shadow);
    }
    .btn:hover{transform: translateY(-1px)}
    .btn:active{transform: translateY(0)}
    .btn-primary{
      background: var(--grad-primary);
      color:#0b0d12; font-weight:700;
    }
    .btn-outline{
      background:transparent; border:1px solid rgba(255,255,255,0.12); color:var(--text)
    }
    .mobile-nav{display:none}
    @media (max-width: 900px){
      nav{display:none}
      .mobile-nav{display:block; margin-left:auto}
    }

    /* Hero */
    .hero{
      position:relative; padding:80px 0 40px; overflow:hidden; isolation:isolate;
      background:
        radial-gradient(1600px 800px at 20% -10%, rgba(255,49,49,0.17), transparent 50%),
        radial-gradient(1200px 900px at 80% 0%, rgba(45,125,255,0.18), transparent 55%),
        radial-gradient(800px 700px at 30% 95%, rgba(255,200,58,0.13), transparent 40%);
    }
    .hero::before{
      /* strict geometric grid */
      content:""; position:absolute; inset:0; z-index:-1; opacity:.55;
      background:
        linear-gradient(to bottom, rgba(255,255,255,0.04) 1px, transparent 1px) 0 0 / 100% 36px,
        linear-gradient(to right, rgba(255,255,255,0.04) 1px, transparent 1px) 0 0 / 36px 100%,
        linear-gradient(to bottom, rgba(255,255,255,0.06) 1px, transparent 1px) 0 0 / 100% 144px,
        linear-gradient(to right, rgba(255,255,255,0.06) 1px, transparent 1px) 0 0 / 144px 100%;
      mix-blend-mode: overlay;
    }
    .hero-inner{
      display:grid; grid-template-columns: 1.1fr 1fr; gap:36px; align-items:stretch;
    }
    @media (max-width: 1000px){
      .hero-inner{grid-template-columns: 1fr; gap:22px}
    }
    .hero-copy{
      padding:8px 0 12px;
    }
    .eyebrow{
      display:inline-flex; align-items:center; gap:8px; font-size:14px; color:#111; background: #f0f4ff; padding:6px 10px; border-radius:999px;
      border:1px solid #dbe7ff; box-shadow: inset 0 0 0 1px rgba(45,125,255,0.12), 0 8px 20px rgba(45,125,255,0.15);
    }
    .eyebrow .dot{width:8px;height:8px;border-radius:50%; background: var(--grad-primary)}
    h1{
      font-family:Poppins, Inter, sans-serif;
      font-size: clamp(34px, 5.2vw, 62px);
      line-height:1.05; margin:16px 0 14px; letter-spacing:-0.02em;
      text-shadow: 0 8px 35px rgba(0,0,0,0.6);
    }
    .lead{
      font-size: clamp(16px, 2.3vw, 20px);
      color:var(--muted); max-width: 42ch;
    }
    .hero-cta{display:flex; gap:12px; margin:20px 0 10px; flex-wrap:wrap}
    .trust{
      display:flex; align-items:center; gap:12px; margin-top:10px; color:var(--muted); font-size:14px;
    }
    .rating{display:flex; gap:4px}
    .star{
      width:16px;height:16px; display:inline-block; background: conic-gradient(#ffc83a, #ff9b2f, #ffc83a);
      -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24"><path d="M12 2l2.9 6.9L22 10l-5.5 4.5L18 22l-6-3.6L6 22l1.5-7.5L2 10l7.1-1.1L12 2z"/></svg>') no-repeat center / contain;
      mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24"><path d="M12 2l2.9 6.9L22 10l-5.5 4.5L18 22l-6-3.6L6 22l1.5-7.5L2 10l7.1-1.1L12 2z"/></svg>') no-repeat center / contain;
      filter: drop-shadow(0 2px 6px rgba(255,200,58,.4));
    }

    /* Demo Panel */
    .panel{
      position:relative; background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border:1px solid rgba(255,255,255,0.12);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .panel .panel-head{
      display:flex; align-items:center; justify-content:space-between; gap:8px;
      padding:14px 16px; border-bottom:1px solid rgba(255,255,255,0.1);
      background: linear-gradient(180deg, rgba(255,255,255,0.05), transparent);
    }
    .traffic{display:flex; gap:8px}
    .dot-r,.dot-y,.dot-g{width:10px;height:10px;border-radius:50%}
    .dot-r{background:#ff5f57}.dot-y{background:#ffbd2e}.dot-g{background:#28c940}
    .panel-body{padding:16px}
    .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .text-input, .textarea{
      width:100%;
      background: rgba(255,255,255,0.04);
      border:1px solid rgba(255,255,255,0.14);
      color:var(--text); padding:12px 14px; border-radius:12px; outline:none;
      transition:border .2s ease, box-shadow .2s ease, background .2s ease;
    }
    .textarea{
      min-height: 160px; resize:vertical; line-height:1.55;
      background-image: linear-gradient(to bottom, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
    }
    .text-input:focus,.textarea:focus{border-color: rgba(45,125,255,0.6); box-shadow: 0 0 0 4px rgba(45,125,255,0.22)}
    .small{font-size:12px; color:var(--muted)}
    .controls{display:flex; gap:8px; flex-wrap:wrap}
    .chip{
      display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
      background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.12); cursor:pointer; transition:.2s;
    }
    .chip[aria-pressed="true"]{background: var(--grad-primary); color:#111; border-color: transparent}
    .input-bar{
      display:flex; gap:10px; align-items:center; margin-top:10px;
      background: rgba(0,0,0,0.25); border:1px solid rgba(255,255,255,0.12); padding:8px; border-radius:12px;
    }
    .input-bar input{
      flex:1; background:transparent; border:0; outline:none; color:var(--text); padding:10px 12px; border-radius:10px;
    }
    .send{padding:10px 14px; border-radius:10px; border:0; background:var(--grad-primary); color:#0b0d12; font-weight:700; cursor:pointer}
    .send:disabled{opacity:.6; cursor:not-allowed}
    .toggle{
      display:flex; align-items:center; gap:8px; user-select:none;
    }
    .switch{
      --w: 48px; --h:26px;
      width:var(--w); height:var(--h); background: rgba(255,255,255,0.15); border-radius:999px; position:relative; border:1px solid rgba(255,255,255,0.2);
      transition:.25s;
    }
    .switch::after{
      content:""; position:absolute; left:3px; top:3px; width: var(--h) ; height: var(--h); aspect-ratio:1/1; background:#fff; border-radius:50%; transition:.25s; box-shadow: 0 3px 10px rgba(0,0,0,0.4);
    }
    .switch[data-on="true"]{background: var(--grad-primary); border-color: transparent}
    .switch[data-on="true"]::after{left: calc(var(--w) - var(--h) - 3px); background:#0b0d12}

    .answer{
      margin-top:12px; padding:14px; border-radius:12px; background: rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.12);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
      min-height: 64px;
    }
    .answer.loading{position:relative; overflow:hidden; color:transparent}
    .answer.loading::after{
      content:"Thinking…";
      position:absolute; inset:0; color:var(--muted); display:flex; align-items:center; justify-content:center;
    }
    .progress{
      height:8px; border-radius:999px; background: rgba(255,255,255,0.08); overflow:hidden; margin-top:12px;
    }
    .progress>span{
      display:block; height:100%; width:0%; background: var(--grad-primary); transition: width .45s ease;
    }
    .suggestions{display:flex; gap:8px; flex-wrap:wrap; margin-top:10px}
    .suggestions button{border:0; background:rgba(255,255,255,0.06); color:var(--text); padding:8px 10px; border-radius:999px; cursor:pointer; border:1px solid rgba(255,255,255,0.12)}
    .suggestions button:hover{background: rgba(255,255,255,0.1)}
    .doc-preview{
      margin-top:12px; padding:10px; border-radius:12px; background: rgba(0,0,0,0.25); border:1px solid rgba(255,255,255,0.12); max-height:160px; overflow:auto; font-size:14px;
    }
    .hl{
      background: linear-gradient(0deg, rgba(255,200,58,0.2), rgba(255,200,58,0.2)) no-repeat;
      border-radius:6px; padding:1px 2px;
    }
    .tag{
      display:inline-flex; padding:6px 8px; background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.12); border-radius:8px; gap:8px; align-items:center; color:var(--muted); font-size:12px;
    }

    /* How it works - tie-dye blueprint */
    .blueprint{
      position:relative; padding:80px 0; overflow:hidden; background: radial-gradient(1200px 600px at 10% 10%, rgba(45,125,255,0.25), transparent 50%) ;
    }
    .blueprint::before{
      content:""; position:absolute; inset:-50%; pointer-events:none; filter: blur(40px); opacity:.9;
      background: conic-gradient(from 0deg, rgba(255,49,49,0.22), rgba(255,200,58,0.22), rgba(45,125,255,0.22), rgba(255,49,49,0.22));
      animation: swirl 24s linear infinite;
      mix-blend-mode: screen;
    }
    .blueprint::after{
      content:""; position:absolute; inset:0; pointer-events:none; opacity:.5;
      background:
        repeating-linear-gradient(0deg, rgba(173,205,255,0.10) 0 1px, transparent 1px 40px),
        repeating-linear-gradient(90deg, rgba(173,205,255,0.10) 0 1px, transparent 1px 40px);
      mask: radial-gradient(80% 80% at 50% 50%, #000, transparent 90%);
    }
    @keyframes swirl {
      0%{transform: rotate(0deg) scale(1.1)}
      100%{transform: rotate(360deg) scale(1.1)}
    }
    .steps{
      display:grid; grid-template-columns: repeat(3, 1fr); gap:18px; position:relative; z-index:2;
    }
    @media (max-width: 900px){
      .steps{grid-template-columns: 1fr}
    }
    .step{
      background: rgba(6,8,12,0.45); border:1px solid rgba(173,205,255,0.16); border-radius:16px; padding:18px;
      backdrop-filter: blur(8px);
      box-shadow: 0 10px 30px rgba(45,125,255,0.12);
    }
    .step .num{
      width:28px;height:28px;border-radius:8px; display:flex; align-items:center; justify-content:center; font-weight:800; color:#0b0d12; background: var(--grad-primary); box-shadow: var(--shadow); margin-bottom:10px;
    }
    .step h3{margin:6px 0 8px; font-family:Poppins, Inter, sans-serif}
    .step p{color:var(--muted)}

    /* Features */
    .features{
      padding:70px 0 50px;
    }
    .grid-features{
      display:grid; grid-template-columns: repeat(3, 1fr); gap:16px;
    }
    @media (max-width: 1000px){
      .grid-features{grid-template-columns: 1fr 1fr}
    }
    @media (max-width: 620px){
      .grid-features{grid-template-columns: 1fr}
    }
    .feature{
      display:flex; gap:14px; background: rgba(255,255,255,0.05); border:1px solid rgba(255,255,255,0.12); border-radius:14px; padding:14px; align-items:flex-start
    }
    .ico{
      width:40px;height:40px; border-radius:12px; background: var(--grad-primary); display:grid; place-items:center; color:#0b0d12; box-shadow: var(--shadow);
    }
    .feature h4{margin:4px 0 6px; font-family:Poppins, Inter, sans-serif}
    .feature p{color:var(--muted); font-size:14px}

    /* Pricing */
    .pricing{
      padding:70px 0; position:relative;
      background: radial-gradient(900px 500px at 80% 50%, rgba(255,49,49,0.14), transparent 50%),
                  radial-gradient(900px 600px at 10% 80%, rgba(255,200,58,0.14), transparent 50%);
    }
    .plans{
      display:grid; grid-template-columns: 1fr 1fr; gap:18px;
    }
    @media (max-width: 900px){
      .plans{grid-template-columns: 1fr}
    }
    .plan{
      background: rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.12); border-radius:18px; padding:20px; box-shadow: var(--shadow)
    }
    .price{
      font-size:38px; font-weight:900; font-family:Poppins, Inter, sans-serif;
    }
    .plan ul{list-style:none; padding:0; margin:12px 0 0; display:grid; gap:10px}
    .plan li{display:flex; gap:8px; align-items:center}
    .tick{width:18px;height:18px; border-radius:50%; background: linear-gradient(135deg, #34d399, #059669); display:grid; place-items:center}
    .tick svg{width:12px;height:12px; fill:#081012}
    .plan .btn{margin-top:14px}

    /* FAQ */
    .faq{padding:60px 0}
    .qa{border:1px solid rgba(255,255,255,0.12); border-radius:14px; padding:12px 14px; background: rgba(255,255,255,0.04)}
    .qa + .qa{margin-top:10px}
    .qa summary{
      list-style:none; cursor:pointer; display:flex; align-items:center; justify-content:space-between; gap:10px; font-weight:600
    }
    .qa summary::-webkit-details-marker{display:none}
    .qa p{color:var(--muted); margin:10px 0 0}

    /* Footer */
    footer{
      border-top:1px solid rgba(255,255,255,0.1);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), transparent);
      padding:24px 0 40px;
      color:var(--muted)
    }

    /* Art layers - "Bauhaus jellyfish" */
    .art{
      position:absolute; inset:0; pointer-events:none; overflow:hidden; z-index:-1;
    }
    .jelly{
      position:absolute; border-radius:50%;
      filter: blur(1px); opacity:.9; mix-blend-mode: screen;
      box-shadow:
        0 0 40px rgba(45,125,255,0.5),
        0 0 120px rgba(45,125,255,0.35),
        0 0 240px rgba(45,125,255,0.25);
      animation: float 18s ease-in-out infinite;
    }
    .j1{
      width:220px; height:220px; left: -40px; top: 40px;
      background: radial-gradient(circle at 40% 30%, rgba(45,125,255,0.8) 0%, rgba(45,125,255,0.45) 25%, rgba(0,0,0,0) 60%),
                  radial-gradient(circle at 70% 60%, rgba(255,49,49,0.6) 0%, transparent 55%);
      animation-delay: -2s;
    }
    .j2{
      width:260px; height:260px; right: -60px; top: 160px;
      background: radial-gradient(circle at 50% 40%, rgba(255,200,58,0.75), rgba(255,200,58,0.3) 35%, rgba(0,0,0,0) 65%),
                  radial-gradient(circle at 30% 70%, rgba(45,125,255,0.5), transparent 60%);
      animation-delay: -6s;
    }
    .j3{
      width:180px; height:180px; left: 35%; bottom: -40px;
      background: radial-gradient(circle at 50% 30%, rgba(45,125,255,0.8) 0%, rgba(45,125,255,0.35) 35%, rgba(0,0,0,0) 65%),
                  radial-gradient(circle at 70% 80%, rgba(255,49,49,0.45), transparent 60%);
      animation-delay: -10s;
    }
    @keyframes float {
      0%,100%{transform: translateY(0) translateX(0)}
      50%{transform: translateY(-16px) translateX(8px)}
    }
    .kandinsky{
      position:absolute; inset:0; pointer-events:none; opacity:.75; mix-blend-mode: screen;
    }

    /* Utilities */
    .section-title{
      font-family:Poppins, Inter, sans-serif; font-weight:800; font-size: clamp(26px, 4vw, 40px); margin:0 0 20px;
    }
    .sub{
      color:var(--muted); margin:8px 0 24px; max-width: 60ch;
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{animation: none !important; transition: none !important}
    }
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <span>iChatbook</span>
      </div>
      <nav aria-label="Primary">
        <ul>
          <li><a href="#demo">Demo</a></li>
          <li><a href="#how">How it works</a></li>
          <li><a href="#features">Features</a></li>
          <li><a href="#pricing">Pricing</a></li>
          <li><a href="#faq">FAQ</a></li>
        </ul>
      </nav>
      <div class="nav-actions">
        <button class="btn btn-outline" onclick="document.getElementById('demo').scrollIntoView({behavior:'smooth'})">Try the Demo</button>
        <button class="btn btn-primary">Start Free</button>
      </div>
      <button class="btn mobile-nav" onclick="document.querySelector('nav')?.classList.toggle('open')" aria-label="Toggle menu">☰</button>
    </div>
  </header>

  <main>
    <section class="hero" id="home" aria-label="Hero">
      <div class="art">
        <div class="jelly j1"></div>
        <div class="jelly j2"></div>
        <div class="jelly j3"></div>
        <svg class="kandinsky" viewBox="0 0 1200 600" preserveAspectRatio="xMidYMid slice" aria-hidden="true">
          <defs>
            <filter id="glow"><feGaussianBlur stdDeviation="4" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
          </defs>
          <!-- Primary Bauhaus shapes with glow -->
          <circle cx="180" cy="120" r="50" fill="#ff3131" filter="url(#glow)" opacity="0.8"/>
          <circle cx="1040" cy="90" r="40" fill="#2d7dff" filter="url(#glow)" opacity="0.9"/>
          <rect x="520" y="60" width="18" height="120" fill="#ffc83a" filter="url(#glow)"/>
          <path d="M300,520 A160,160 0 0,1 620,520" fill="none" stroke="#2d7dff" stroke-width="8" filter="url(#glow)" opacity="0.8"/>
          <path d="M620,520 A160,160 0 0,1 940,520" fill="none" stroke="#ff3131" stroke-width="8" filter="url(#glow)" opacity="0.8"/>
          <path d="M100,260 h100 v100 h-100z" fill="none" stroke="#ffc83a" stroke-width="5" filter="url(#glow)" opacity="0.8"/>
          <circle cx="900" cy="300" r="70" fill="none" stroke="#ffc83a" stroke-width="6" filter="url(#glow)" />
          <line x1="760" y1="80" x2="1080" y2="80" stroke="#ff3131" stroke-width="6" filter="url(#glow)" />
        </svg>
      </div>

      <div class="container hero-inner">
        <div class="hero-copy">
          <span class="eyebrow"><span class="dot"></span> Unlock Any Book</span>
          <h1>Unlock Any Book: Your Personal AI Chat Companion</h1>
          <p class="lead">Chat with textbooks, research papers, and novels. Ask questions, get clear explanations at your level, and turn complex reading into deep understanding.</p>
          <div class="hero-cta">
            <button class="btn btn-primary" onclick="document.getElementById('demo').scrollIntoView({behavior:'smooth'})">Try it free</button>
            <button class="btn" onclick="document.getElementById('features').scrollIntoView({behavior:'smooth'})">Explore features</button>
          </div>
          <div class="trust">
            <div class="rating" aria-label="Rated 4.9 out of 5">
              <span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span><span class="star"></span>
            </div>
            Loved by lifelong learners and students
            <span class="tag"><svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg> Learn faster</span>
          </div>
        </div>

        <div class="panel" id="demo">
          <div class="panel-head">
            <div class="traffic" aria-hidden="true"><span class="dot-r"></span><span class="dot-y"></span><span class="dot-g"></span></div>
            <strong>Live Demo: AI Book Chat</strong>
            <span class="small">No sign‑in required</span>
          </div>
          <div class="panel-body">
            <div class="row" style="justify-content:space-between">
              <div class="controls" role="group" aria-label="Modes">
                <button class="chip" data-mode="tutor" aria-pressed="true">Tutor</button>
                <button class="chip" data-mode="socratic" aria-pressed="false">Socratic</button>
                <button class="chip" data-mode="summary" aria-pressed="false">Summary</button>
              </div>
              <div class="toggle">
                <span class="small">Deep understanding</span>
                <div class="switch" id="deepSwitch" role="switch" aria-checked="false" tabindex="0" data-on="false"></div>
              </div>
            </div>

            <label class="small" for="docInput" style="display:block; margin-top:10px">Paste a passage or chapter text</label>
            <textarea id="docInput" class="textarea" placeholder="Paste text from a book, article, or PDF. Or load a sample..." spellcheck="false"></textarea>
            <div class="row" style="justify-content:space-between; margin-top:8px">
              <div class="controls">
                <button class="chip" id="sampleBtn"><svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg> Load sample</button>
                <button class="chip" id="clearBtn"><svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M6 19L18 7M6 7l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg> Clear</button>
                <button class="chip" id="flashBtn"><svg width="14" height="14" viewBox="0 0 24 24" fill="none"><path d="M13 2L3 14h7l-1 8 10-12h-7l1-8z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/></svg> Make flashcards</button>
              </div>
              <div class="row">
                <span class="small" style="margin-right:8px">Explain for age:</span>
                <input type="range" min="9" max="18" value="13" id="level" aria-label="Reading level" />
                <span class="small" id="lvlOut">13</span>
              </div>
            </div>

            <div class="input-bar" style="margin-top:12px">
              <input id="question" type="text" placeholder="Ask something about the text…" />
              <button id="askBtn" class="send" disabled>Ask</button>
            </div>

            <div class="answer" id="answer" aria-live="polite"></div>
            <div class="progress" title="Coverage"><span id="coverageBar"></span></div>
            <div class="suggestions" id="sugs"></div>
            <div class="doc-preview" id="preview" aria-label="Highlighted context"></div>

            <div id="flashcards" style="display:none; margin-top:12px">
              <div class="row" style="justify-content:space-between">
                <strong>Flashcards</strong>
                <div class="controls">
                  <button class="chip" id="prevCard">Prev</button>
                  <button class="chip" id="nextCard">Next</button>
                </div>
              </div>
              <div class="panel" style="margin-top:8px">
                <div class="panel-body" id="cardBody">Generate from your text to study key terms.</div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </section>

    <section class="blueprint" id="how">
      <div class="container">
        <h2 class="section-title">How it works</h2>
        <p class="sub">A precise, rational reading flow with a splash of creative color—like architectural blueprints melting into a tie‑dye spiral. Study smarter in three steps.</p>
        <div class="steps">
          <div class="step">
            <div class="num">1</div>
            <h3>Import</h3>
            <p>Paste text or upload content from books, papers, and notes. iChatbook builds a structured, searchable context.</p>
          </div>
          <div class="step">
            <div class="num">2</div>
            <h3>Chat</h3>
            <p>Ask questions in your own words. Toggle Tutor, Socratic, or Summary modes to match how you learn best.</p>
          </div>
          <div class="step">
            <div class="num">3</div>
            <h3>Understand</h3>
            <p>Get concise explanations, definitions, and examples with sentence‑level citations and highlights.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="features" id="features">
      <div class="container">
        <h2 class="section-title">Designed for deep understanding</h2>
        <p class="sub">AI chat, interactive reading, and a personal tutor in one place.</p>
        <div class="grid-features">
          <div class="feature">
            <div class="ico" aria-hidden="true">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="#0b0d12"><path d="M3 4h18v14H3z"/><path d="M3 18l9 3 9-3" fill="#0b0d12"/></svg>
            </div>
            <div>
              <h4>Chat with any book</h4>
              <p>Paste chapters, articles, or notes and ask anything—get answers grounded in your text.</p>
            </div>
          </div>
          <div class="feature">
            <div class="ico">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="#0b0d12"><path d="M12 2l9 4-9 4-9-4 9-4zm0 6v14"/></svg>
            </div>
            <div>
              <h4>Explain at your level</h4>
              <p>Choose a reading age target. The Tutor rewrites complex ideas with simple language.</p>
            </div>
          </div>
          <div class="feature">
            <div class="ico">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="#0b0d12"><path d="M3 12h18M12 3v18"/></svg>
            </div>
            <div>
              <h4>Strict citations</h4>
              <p>See exactly which sentences support each answer with inline highlights.</p>
            </div>
          </div>
          <div class="feature">
            <div class="ico">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="#0b0d12"><path d="M4 6h16v12H4z"/><path d="M8 10h8M8 14h5" stroke="#0b0d12" stroke-width="2"/></svg>
            </div>
            <div>
              <h4>Interactive flashcards</h4>
              <p>Auto‑generate study cards from your text. Review key terms and ideas in seconds.</p>
            </div>
          </div>
          <div class="feature">
            <div class="ico">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="#0b0d12"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
            </div>
            <div>
              <h4>Socratic coaching</h4>
              <p>Be guided by questions that build your reasoning and comprehension step by step.</p>
            </div>
          </div>
          <div class="feature">
            <div class="ico">
              <svg width="22" height="22" viewBox="0 0 24 24" fill="#0b0d12"><path d="M4 7h16M4 12h16M4 17h16"/></svg>
            </div>
            <div>
              <h4>Notes and highlights</h4>
              <p>Collect definitions, key quotes, and insights into clean, shareable notes.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="pricing" id="pricing">
      <div class="container">
        <h2 class="section-title">Simple, fair pricing</h2>
        <p class="sub">Start free. Upgrade when you need more power.</p>
        <div class="plans">
          <div class="plan">
            <h3>Starter</h3>
            <div class="price">$0<span class="small">/mo</span></div>
            <ul>
              <li><span class="tick"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> AI chat with pasted text</li>
              <li><span class="tick"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Highlights & citations</li>
              <li><span class="tick"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Flashcards (basic)</li>
            </ul>
            <button class="btn btn-outline">Get started</button>
          </div>
          <div class="plan">
            <h3>Pro</h3>
            <div class="price">$9<span class="small">/mo</span></div>
            <ul>
              <li><span class="tick"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Full document uploads</li>
              <li><span class="tick"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Unlimited questions</li>
              <li><span class="tick"><svg viewBox="0 0 24 24"><path d="M20 6L9 17l-5-5"/></svg></span> Advanced study tools</li>
            </ul>
            <button class="btn btn-primary">Upgrade to Pro</button>
          </div>
        </div>
      </div>
    </section>

    <section class="faq" id="faq">
      <div class="container">
        <h2 class="section-title">Frequently asked questions</h2>
        <details class="qa">
          <summary>Is this the real AI? <span>+</span></summary>
          <p>The demo runs locally in your browser to show the experience. The full version connects to powerful AI models for best results.</p>
        </details>
        <details class="qa">
          <summary>Will it work with my textbooks? <span>+</span></summary>
          <p>Yes. Paste text or upload supported formats in the full app. Answers are grounded directly in your material.</p>
        </details>
        <details class="qa">
          <summary>Is my data private? <span>+</span></summary>
          <p>We respect privacy. Your content is encrypted in transit. You can delete documents at any time.</p>
        </details>
      </div>
    </section>
  </main>

  <footer>
    <div class="container" style="display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:12px">
      <div style="display:flex; align-items:center; gap:12px">
        <div class="logo" style="width:28px;height:28px"></div>
        <span>© <span id="year"></span> iChatbook</span>
      </div>
      <div style="display:flex; gap:12px">
        <a href="#features">Features</a> ·
        <a href="#pricing">Pricing</a> ·
        <a href="#faq">FAQ</a>
      </div>
    </div>
  </footer>

  <script>
    // Utility
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];

    // State
    const state = {
      mode: 'tutor',
      deep: false,
      level: 13,
      sentences: [],
      text: '',
      flashcards: [],
      cardIndex: 0
    };

    // Elements
    const docInput = $('#docInput');
    const askBtn = $('#askBtn');
    const question = $('#question');
    const answer = $('#answer');
    const coverageBar = $('#coverageBar');
    const preview = $('#preview');
    const sugs = $('#sugs');
    const deepSwitch = $('#deepSwitch');
    const levelRange = $('#level');
    const lvlOut = $('#lvlOut');
    const flashWrap = $('#flashcards');
    const cardBody = $('#cardBody');

    // Stopwords (minimal)
    const STOP = new Set("a an the and or but if while is are was were be been being i you he she they it them we us our your to of in on for with as by from at about into over under again further then once here there when where why how all any both each few more most other some such no nor not only own same so than too very can will just don should now this that these those what which who whom whose".split(/\s+/));

    function normalize(str){ return (str||"").replace(/\s+/g,' ').trim(); }

    function splitSentences(text){
      if(!text) return [];
      // Simplified sentence split
      const parts = text
        .replace(/\n+/g, ' ')
        .replace(/\s+/g,' ')
        .split(/(?<=[\.\!\?])\s+(?=[A-Z0-9"“])/)
        .map(s => s.trim())
        .filter(Boolean);
      return parts;
    }

    function keywords(q){
      return q.toLowerCase().replace(/[^a-z0-9\s]/g,' ').split(/\s+/).filter(w => w && !STOP.has(w));
    }

    function scoreSentences(sentences, qwords){
      return sentences.map((s, i) => {
        const tokens = s.toLowerCase().replace(/[^a-z0-9\s]/g,' ').split(/\s+/).filter(Boolean);
        let score = 0;
        for(const w of qwords){
          const c = tokens.filter(t => t === w).length;
          score += c * 2;
          // partial match weight
          if(!c){
            const has = tokens.some(t => t.startsWith(w) || w.startsWith(t));
            if(has) score += 1;
          }
        }
        // prefer shorter but informative sentences
        const len = Math.min(tokens.length, 40);
        score += Math.max(0, 8 - Math.abs(len - 18) / 3);
        return {i, s, score};
      }).sort((a,b)=>b.score-a.score);
    }

    function simplifyText(text, level=13){
      // Light-weight simplifier for readability
      let out = text
        .replace(/\((.*?)\)/g,'$1')
        .replace(/[,;:]\s*/g, '. ')
        .replace(/\s+/g,' ');

      const map = new Map([
        [/utilis(e|e|zing|ation)/gi, 'use'],
        [/\butilize(s|d|r|ing)?\b/gi,'use'],
        [/\bapproximately\b/gi,'about'],
        [/\bconsequently\b/gi,'so'],
        [/\btherefore\b/gi,'so'],
        [/\bhowever\b/gi,'but'],
        [/\bsignificant(ly)?\b/gi,'important'],
        [/\bdemonstrate(s|d)?\b/gi,'show'],
        [/\bsubsequent(ly)?\b/gi,'after'],
        [/\bprior\b/gi,'before'],
        [/\bcomplex\b/gi,'hard'],
        [/\bcomprehension\b/gi,'understanding'],
        [/\bapproximately\b/gi,'about'],
        [/\bcomponent\b/gi,'part'],
        [/\bmethodology\b/gi,'method'],
      ]);
      for(const [re, rep] of map) out = out.replace(re, rep);

      // Short sentences for lower levels
      if(level <= 12){
        out = out.split(/(?<=[\.\!\?])\s+/).map(s=>{
          // clip length
          return s.length > 160 ? s.slice(0,150) + '…' : s;
        }).join(' ');
      }
      return out;
    }

    function buildAnswer(text, q, mode='tutor', level=13, deep=false){
      const sentences = splitSentences(text);
      if(sentences.length === 0) return { reply: "Please paste a passage first.", cites: [], coverage: 0 };
      const qwords = keywords(q);
      const scored = scoreSentences(sentences, qwords);

      // coverage ratio
      const matched = scored.filter(x => x.score > 0).length;
      const coverage = sentences.length ? Math.round(100 * matched / sentences.length) : 0;

      const top = scored.slice(0, Math.max(2, deep ? 5 : 3)).filter(x => x.score > 0);
      const cites = top.map(t => t.i);

      // Compose
      if(mode === 'summary'){
        const pick = scored.slice(0, Math.min(5, sentences.length)).map(x => sentences[x.i]);
        let summary = pick.join(' ');
        if(deep){
          summary += " Key ideas: " + extractKeyIdeas(sentences).slice(0,4).map(x => x.term).join(', ') + ".";
        }
        return { reply: simplifyText(summary, level), cites, coverage };
      }

      if(mode === 'socratic'){
        const guide = generateSocratic(sentences, qwords, top.map(t=>t.s), deep);
        return { reply: guide, cites, coverage };
      }

      // Tutor mode
      let body = '';
      if(top.length){
        body += simplifyText(top.map(t=>t.s).join(' '), level);
      } else {
        body += "I couldn't find an exact match in your text. Try asking about a specific idea, term, or paragraph.";
      }
      if(deep){
        const defs = buildDefinitions(sentences, qwords, 3);
        if(defs.length){
          body += "\n\nDefinitions:\n" + defs.map(d => `• ${d.term}: ${d.def}`).join('\n');
        }
        const steps = buildStepsFromContext(top.map(t=>t.s));
        if(steps.length){
          body += "\n\nSteps:\n" + steps.map((s,i)=> `${i+1}. ${s}`).join('\n');
        }
      }
      return { reply: body, cites, coverage };
    }

    function extractKeyIdeas(sentences){
      const freq = new Map();
      for(const s of sentences){
        for(const w of s.toLowerCase().replace(/[^a-z0-9\s]/g,' ').split(/\s+/)){
          if(!w || STOP.has(w) || w.length < 5) continue;
          freq.set(w, 1+(freq.get(w)||0));
        }
      }
      return [...freq.entries()].sort((a,b)=>b[1]-a[1]).slice(0, 10).map(([term, n])=>({term, n}));
    }

    function buildDefinitions(sentences, qwords, n=3){
      const ideas = extractKeyIdeas(sentences).filter(x => !qwords.includes(x.term));
      const defs = [];
      for(const idea of ideas){
        const s = sentences.find(s => s.toLowerCase().includes(idea.term));
        if(s) defs.push({term: capitalize(idea.term), def: simplifyText(s, 14)});
        if(defs.length >= n) break;
      }
      return defs;
    }

    function buildStepsFromContext(contextSentences){
      if(!contextSentences.length) return [];
      // naive step extraction: split by connectors
      const joined = contextSentences.join(' ');
      return joined.split(/\b(?:first|second|third|then|next|finally|therefore|so|because)\b/gi)
        .map(x => x.trim())
        .filter(x => x.length>0)
        .slice(0,4);
    }

    function generateSocratic(sentences, qwords, context, deep){
      const q1 = `What does the text say about "${(qwords[0]||'the main idea')}" in your own words?`;
      const q2 = context[0] ? `Which sentence best supports that idea? Try to find it and explain why.` : `Can you find a sentence that supports your idea?`;
      const q3 = deep ? `How would you teach this to a younger student (age 10)? Use a simple example.` : `Can you give a simple example using these ideas?`;
      const q4 = deep ? `What is the cause-and-effect chain you notice here?` : `What caused this and what happened after?`;
      return [q1, q2, q3, q4].map((x,i)=>`${i+1}. ${x}`).join('\n');
    }

    function capitalize(s){ return s ? s[0].toUpperCase()+s.slice(1) : s; }

    function highlightPreview(sentences, indices){
      const html = sentences.map((s, i) => {
        const safe = escapeHTML(s);
        if(indices.includes(i)) return `<span class="hl">${safe}</span>`;
        return safe;
      }).join(' ');
      preview.innerHTML = html || '<span class="small">Your passage preview will appear here with highlighted evidence.</span>';
    }

    function escapeHTML(str){
      return str.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }

    function updateSuggestions(qwords, sentences){
      const ideas = extractKeyIdeas(sentences).slice(0,6).map(x=>x.term);
      const presets = [
        'Explain the main idea simply.',
        'Define key terms with examples.',
        'How does cause lead to effect?',
        'Summarize this in 3 bullets.',
        'Why is this important?',
        'Create a practice question.'
      ];
      sugs.innerHTML = ideas.concat(presets).slice(0,6).map(text => `<button type="button">${escapeHTML(capitalize(text))}</button>`).join('');
      sugs.querySelectorAll('button').forEach(b => b.addEventListener('click', ()=> {
        question.value = b.textContent;
        question.focus();
        updateAskState();
      }));
    }

    function updateAskState(){
      askBtn.disabled = !(normalize(docInput.value).length && normalize(question.value).length);
    }

    function setMode(newMode){
      state.mode = newMode;
      $$('.chip[data-mode]').forEach(ch => ch.setAttribute('aria-pressed', ch.dataset.mode === newMode ? 'true':'false'));
    }

    function setDeep(on){
      state.deep = on;
      deepSwitch.dataset.on = on ? "true" : "false";
      deepSwitch.setAttribute('aria-checked', on ? 'true' : 'false');
    }

    function renderAnswer(text){
      answer.textContent = text;
      answer.classList.remove('loading');
    }

    function setLoading(loading){
      if(loading){ answer.classList.add('loading'); answer.textContent = 'Thinking…' }
      else answer.classList.remove('loading');
    }

    // Flashcards
    function buildFlashcards(sentences){
      const ideas = extractKeyIdeas(sentences).slice(0,8);
      const cards = [];
      for(const idea of ideas){
        const s = sentences.find(x => x.toLowerCase().includes(idea.term));
        if(s){
          cards.push({q:`Define: ${capitalize(idea.term)}`, a:simplifyText(s, 13)});
        }
      }
      return cards.length ? cards : [{q:'No terms found', a:'Add more text for better flashcards.'}];
    }
    function renderCard(){
      const card = state.flashcards[state.cardIndex] || {q:'', a:''};
      cardBody.innerHTML = `<div style="display:flex; flex-direction:column; gap:10px">
        <div style="font-weight:700">${escapeHTML(card.q)}</div>
        <div class="small" style="color:var(--muted)">Answer</div>
        <div>${escapeHTML(card.a)}</div>
        <div class="small">Card ${state.cardIndex+1} of ${state.flashcards.length}</div>
      </div>`;
    }

    // Events
    $$('.chip[data-mode]').forEach(ch => ch.addEventListener('click', () => setMode(ch.dataset.mode)));
    deepSwitch.addEventListener('click', ()=> setDeep(!(state.deep)));
    deepSwitch.addEventListener('keydown', (e)=>{ if(e.key===' '||e.key==='Enter'){ e.preventDefault(); setDeep(!(state.deep)); }});
    levelRange.addEventListener('input', ()=> { state.level = +levelRange.value; lvlOut.textContent = levelRange.value });

    docInput.addEventListener('input', ()=>{
      state.text = docInput.value;
      state.sentences = splitSentences(state.text);
      localStorage.setItem('ichat_doc', state.text);
      updateAskState();
      coverageBar.style.width = '0%';
      highlightPreview(state.sentences, []);
      updateSuggestions([], state.sentences);
    });
    question.addEventListener('input', updateAskState);

    $('#sampleBtn').addEventListener('click', ()=>{
      const sample = `Photosynthesis is the process by which plants, algae, and some bacteria convert light energy into chemical energy, stored in molecules such as glucose. It primarily occurs in chloroplasts, which contain a green pigment called chlorophyll that captures light. First, in the light-dependent reactions, energy from sunlight is used to split water into oxygen, protons, and electrons, producing ATP and NADPH. Next, in the Calvin cycle, the plant uses ATP and NADPH to fix carbon dioxide into sugars. Consequently, photosynthesis not only fuels plant growth but also releases oxygen, making it essential for life on Earth.`;
      docInput.value = sample;
      docInput.dispatchEvent(new Event('input'));
    });
    $('#clearBtn').addEventListener('click', ()=>{
      docInput.value=''; question.value=''; docInput.dispatchEvent(new Event('input')); updateAskState(); renderAnswer(''); sugs.innerHTML=''; preview.innerHTML=''; coverageBar.style.width='0%';
    });

    $('#flashBtn').addEventListener('click', ()=>{
      if(!state.sentences.length){
        flashWrap.style.display = 'block';
        cardBody.textContent = 'Add some text above to generate flashcards.';
        return;
      }
      state.flashcards = buildFlashcards(state.sentences);
      state.cardIndex = 0;
      flashWrap.style.display = 'block';
      renderCard();
    });
    $('#nextCard').addEventListener('click', ()=>{
      if(!state.flashcards.length) return;
      state.cardIndex = (state.cardIndex + 1) % state.flashcards.length;
      renderCard();
    });
    $('#prevCard').addEventListener('click', ()=>{
      if(!state.flashcards.length) return;
      state.cardIndex = (state.cardIndex - 1 + state.flashcards.length) % state.flashcards.length;
      renderCard();
    });

    askBtn.addEventListener('click', ()=>{
      if(askBtn.disabled) return;
      setLoading(true);
      // simulate processing
      setTimeout(()=>{
        const res = buildAnswer(state.text, question.value, state.mode, state.level, state.deep);
        renderAnswer(res.reply);
        coverageBar.style.width = Math.min(100, res.coverage) + '%';
        highlightPreview(state.sentences, res.cites);
      }, 450);
    });

    function restore(){
      const saved = localStorage.getItem('ichat_doc');
      if(saved){
        docInput.value = saved;
        docInput.dispatchEvent(new Event('input'));
      }
      lvlOut.textContent = levelRange.value;
      setMode('tutor'); setDeep(false);
      updateAskState();
    }
    restore();

    // Build initial suggestions
    updateSuggestions([], []);

    // Footer year
    $('#year').textContent = new Date().getFullYear();

    // Keyboard: Enter to ask
    question.addEventListener('keydown', e=>{
      if(e.key === 'Enter' && !e.shiftKey){
        e.preventDefault();
        askBtn.click();
      }
    });

    // Parallax for art layers
    const hero = $('.hero');
    hero.addEventListener('pointermove', (e)=>{
      const r = hero.getBoundingClientRect();
      const x = (e.clientX - r.width/2)/r.width;
      const y = (e.clientY - r.height/2)/r.height;
      $$('.jelly').forEach((el,i)=>{
        const dx = (i+1)*6 * x, dy = (i+1)*8 * y;
        el.style.transform = `translate(${dx}px, ${dy}px)`;
      });
    }, {passive:true});

    // Build initial doc preview text if any
    highlightPreview([], []);

  </script>
</body>
</html>